<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.js"></script>
        <script src="js/vendor/bootstrap-datetimepicker.min.js"></script>
        <script>
            // ToDo lat, lng from localStorage and iframe calling
          function pointOnMap(id) {
            var myPointDiv;
            var idName = "id" + id + " ";
            var x = Math.random()*65;
            var y = Math.random()*85;
            var amountBikes = Math.floor(Math.random()*8);
            var redOrGreen;
            if (amountBikes < 3) {
              redOrGreen = 'circle-red';
            }
            else {
              redOrGreen = 'circle-green'; 
            }
            myPointDiv = "<div class='"+idName+"circle " + redOrGreen + "' style='top:"+y+"%; left:"+x+"%'>" + amountBikes + "</div>";
            return myPointDiv;
          };

          function changeToActual() {
            $("#btn-forecast").removeClass("active");
            $("#btn-actual").addClass("active");

            $(".id1").addClass("blue-border").html("8");
            $(".id2").addClass("blue-border").html("2");
            $(".id3").addClass("blue-border").html("5");
            $(".id4").addClass("blue-border").html("1");

          };

          function loadMap() {
            var location = localStorage.getItem("location");
            $('#anfangsort').val(location);  
            console.log(location);

            var timepoint = localStorage.getItem("time");
            $('.timepoint').val(timepoint);  
            console.log(timepoint);
            
            var lat = localStorage.getItem("lat");
            console.log(lat);
            var lng = localStorage.getItem("lng");
            console.log(lng);
            var url = "http://maps.google.com/maps?q="+lat+","+lng+"&z=16&output=embed";
            $('#iframeCoord').attr('src', url); 
            $('#iframeCoord').trigger("onload");

            var myPoint1 = pointOnMap(1);
            var myPoint2 = pointOnMap(2);
            var myPoint3 = pointOnMap(3);
            var myPoint4 = pointOnMap(4);
            $('#mainMap').append(myPoint1);
            $('#mainMap').append(myPoint2);
            $('#mainMap').append(myPoint3);
            $('#mainMap').append(myPoint4);

          }
        </script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
        
          <a class="navbar-brand" href="/index.html">Book a Bike</a>
        </div>
        <a class="navbar-back pull-right" href="/index.html"><span class="glyphicon glyphicon-arrow-left"></span> </a>
      </div>
    </nav>

    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
      <div class="col-xs-12">
          <form class="form-horizontal">
            <fieldset disabled>
            <!-- Form Name -->
            <legend style="padding-top: 15px;">Reiseauskunft</legend>
            <!-- Text input-->
            <div class="form-group">
              <label class="col-xs-12 control-label" for="Anfangsort">Anfangsort</label>  
              <div class="col-xs-12">
              <input id="anfangsort" name="Anfangsort" type="text" placeholder="" class="form-control input-md disabled" required />
              </div>
              <label class="col-xs-12 control-label" for="Anfangsort" style="padding-top: 15px;">Datum &amp; Uhrzeit</label>  
              <div class="col-xs-12">
                <input size="16" type="text" value="2016-12-07 15:30" readonly class="form-control timepoint form_datetime disabled" />
              </div>
            </div>
            </fieldset>
          </form>

        </div>
        <div class="col-xs-12">
          <div id="mainMap" class="well">
            <!--<div class="overlay" onClick="style.pointerEvents='none'"></div>-->
            <iframe id="iframeCoord" src="" width="100%" height="100%" frameborder="0"></iframe>
            <div id="last-circle"></div>
            <div id="middle-circle"></div>
            <div id="main-circle"></div>
            <div id="location-circle"></div>
          </div> 
        </div>
        <div class="col-xs-12">
          <div class="btn btn-success pull-right" style="margin-bottom: 15px;">Fahrrad buchen</div>
        </div>
      </div>

      <div id="persistent-footer">
        <div class="container">
          <div class="row">
            <div class="col-xs-12 footer-nav">
              <div class="btn-group">
                <button id="btn-forecast" type="button" class="btn btn-default active">Forecast</button>
                <button id="btn-actual" type="button" class="btn btn-default" onclick="changeToActual()">Aktuell</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>

      <!--<footer>
        <p>&copy; FZI Seminar - Gruppe 3</p>
      </footer>-->
    </div> <!-- /container -->        
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.js"><\/script>')</script>
        <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/main.js"></script>
        <script>
          loadMap();
          $( document ).ready(function() {
             $('.place-card-large').hide();
          });
        </script>
        <script>
        </script>
    </body>
</html>
